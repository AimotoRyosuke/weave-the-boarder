# 境界（きょうかい）を編め  -Weave the Border-

2人用ストラテジーボードゲーム

---

## 1. ゲーム概要

本作は、5×5のボード上で自分の領域を広げ、境界を張り巡らせながら相手と競い合う2人用ストラテジーゲームである。

プレイヤーは移動・防衛・破壊の選択を繰り返し、限られたリソースをどう使うかが勝敗を分ける。

---

## 2. 勝利条件

ゲーム終了時、以下の得点を合計し、**合計得点が高いプレイヤーが勝利**する。

* 自分の領域マス数（1マス＝1点）
* 完全に囲われたエリア（1エリア＝＋3点）
* 余ったエネルギートークン（1個＝1点）

### ゲーム終了条件

* 全25マスがいずれかの領域になった時
* いずれかのプレイヤーの境界トークンがすべて配置された時

### 勝敗判定タイミング

* 上記の終了条件が、**あるプレイヤーの行動の完了によって満たされた瞬間**にゲーム終了
* その時点で直ちに得点計算を行い、勝敗を決定する（追加ターンは行わない）

---

## 3. コンポーネント

* 5×5 マスのボード（25マス）
* プレイヤーコマ：2個（白・黒）
* 境界トークン：各プレイヤー10個
* エネルギートークン：共通

---

## 4. セットアップ

1. ボード中央のマスにエネルギートークンを3個配置する（いずれは中央マスだけでなくランダム配置も検討する）
2. 白プレイヤーは (0,0)、黒プレイヤーは (4,4) にそれぞれコマを1つ配置する（いずれは任意の角マスにすることを検討する）
3. 先攻・後攻をランダムに決定する

---

## 5. ターンの流れ

プレイヤーは交互に手番を行う。

自分のターンは次の順で進行する。

1. （任意）特殊アクションを使用してもよい（エネルギー消費）
2. 基本アクションを**1つ**選んで実行する（6章）
3. （任意）再び特殊アクションを使用してもよい（エネルギー消費）
4. ターン終了処理（エネルギー補充：7章）

> 注：特殊アクションは「基本アクションの回数」には含まれない。

---

## 6. 基本アクション

### ① コマを1マス移動する

* 縦または横方向に1マス移動できる
* 移動先は空マスでなければならない
* 境界が張られている辺は越えられない
* 移動後、そのマスは自分の領域となる

---

### ② 境界を張る

* 境界は**マスとマスの間の辺**（またはボード外周の辺）に配置する
* 次の条件を満たす辺にのみ配置できる

  * 辺に接しているマスのうち**少なくとも1つが自分の領域**である
  * その辺に既に境界が配置されていない
* 境界は両プレイヤーの移動を遮断する（どちらも越えられない）

#### UI/実装向けメモ

* 「自分領域に接する、未配置の辺」をハイライトすれば選択肢が確定する

---

### ③ エネルギーを獲得する

以下の条件を満たすエネルギートークンを**1つ**獲得し、自分の所持エネルギーに加える。

* **中央マスに配置されているエネルギートークン**
* **自分の領域マスに上下左右で隣接しているエネルギートークン**

#### 補足ルール

* 中央マスにエネルギートークンが存在しない場合でも、自領域に隣接しているものがあれば取得可能
* 取得可能なエネルギーが存在しない場合、このアクションは選択できない

---

## 7. 特殊アクション（エネルギー消費）

エネルギートークンは、自分のターン中に消費して以下の効果を使用できる。

* 特殊アクションは**1ターン中に複数回**使用してよい（連続使用可）
* 使用タイミングは **基本アクションの前後どちらでも可**

### エネルギー所持上限

* 各プレイヤーの所持エネルギー上限は **5個**（5個を超えて獲得することはできない）

### ターン終了時のエネルギー補充（タイミングの明記）

* 補充は**各プレイヤーのターン終了時に必ず1回**行う（中央が空になった瞬間など、ターン途中では補充しない）
* ターン終了時点で中央マスのエネルギートークンが3個未満なら、**3個になるまで補充**する

### 特殊アクション一覧

| 消費数 | 効果                                                                                                                                                    |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1      | 追加で1マス移動できる（縦横1マス）。境界は越えられない。複数回使用で連続移動可。                                                                        |
| 2      | 相手の境界トークンを1つ除去する（**要塞化されていない境界のみ対象**）。相手が要塞化をまだ行っていないエリアの境界であれば、囲い途中であっても除去可能。 |
| 3      | 囲われた自分のエリアを「要塞化」する（8章）。                                                                                                           |

### 特殊アクション使用制限

* 1ターン中に使用できる特殊アクションの**回数・消費エネルギー総量に上限はない**
* ただし、使用できるのは**自分が所持しているエネルギー数の範囲内**に限られる

### 要塞化の制限

* 要塞化できるのは「完全に囲われたエリア」のみ
* 要塞化後、そのエリアは以降、侵入・境界破壊ができない
* 得点計算時にエリアとして必ずカウントされる

---

## 8. エリアの定義（要塞化・得点判定用）

### 8.1 エリア（領域のかたまり）

* エリアとは、上下左右でつながった**自分の領域マスの連結成分**（1マスでも可）を指す

### 8.2 完全に囲われたエリア（＝囲いエリア）

次のすべてを満たすエリアを「完全に囲われたエリア」とする。

1. エリア内の任意のマスから、上下左右に移動してボード外へ出る経路が存在しない
2. エリアの外周にあたる辺は、すべて以下のいずれかで閉じている

   * 境界トークンが配置されている
   * ボード外周（外周は常に壁として扱う）

> 実装の考え方：エリア外周の各辺を走査し、閉じていない辺が1つでもあれば未達。

---

## 9. 戦略のポイント

* 領域を広げるか、境界で固めるかの判断が重要
* エネルギーの使い所が終盤の逆転要素になる
* 相手の進行ルートを読むことが最大のカギとなる

---

## 10. プレイ時間と対象

* プレイ人数：2人
* プレイ時間：15〜25分
* 対象年齢：10歳以上

---

静かに、しかし確実に境界を編み上げよ。
盤面を制した者こそが、この世界の支配者となる。
